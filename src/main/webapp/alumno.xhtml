<ui:composition template="/WEB-INF/Templates/plantilla.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">
	<ui:define name="title">Página para el alumno</ui:define>

	<ui:define name="botones">
		<li><h:commandButton action="#{controlAlumno.enabletableSolicitudes}" update="solicitudes" value="Vista Solicitudes" /></li>
		<li><h:commandButton action="#{controlAlumno.enabletableNoticias}" update="noticias" value="Vista Noticias" /></li>
		<li><h:commandButton action="#{controlAlumno.enabletableProyectos}" update="proyectos" value="Vista Proyectos" /></li>
		<li><h:commandButton action="#{controlAlumno.enabletablePerfil}" update="perfil" value="Editar Perfil" /></li>
	</ui:define>

	<ui:define name="content">
	
	<style type="text/css">
	.ui-g div {
	    text-align: center;
	}</style>
		<c:choose>
			<c:when test="#{controlAutorizacion.usuario.rol == 'ALUMNO'}">
				
			
				<!--Lista SOLICITUDES  -->
				<h:form rendered="#{controlAlumno.showtableSolicitudes}">
					<p:dataTable class="tabla" id="solicitud"
						value="#{controlAlumno.listaSolicitudes}" var="solicitudes">

						<p:column headerText="Id">
							<h:outputText value="#{solicitudes.id_Solicitud}" />s		
						</p:column>
						<p:column headerText="Estado">
								<h:outputText value="#{solicitudes.estado}" />
						</p:column>
						<p:column headerText="Universidad">
							<h:outputText value="#{solicitudes.universidad}" />
						</p:column>
						<p:column headerText="Proyecto">
							<h:outputText value="#{solicitudes.proyecto.ID_Proyecto}" />
						</p:column>
						

					</p:dataTable>

				</h:form>


				<!-- Lista NOTICIAS  -->

				<h:form rendered="#{controlAlumno.showtableNoticias}">
					<p:dataTable class="tabla" id="noticia"
						value="#{controlAlumno.listaNoticias}" var="noticias">
						<p:column headerText="Id">
										<h:outputText value="#{noticias.id_Noticia}" />							
						</p:column>
						<p:column headerText="Autor">
								<h:outputText value="#{noticias.autor}" />
						</p:column>
						<p:column headerText="ONG">
								<h:outputText value="#{noticias.ong}" />
						</p:column>
						<p:column headerText="Titulo">
									<h:outputText value="#{noticias.titulo}" />
						</p:column>
						<p:column headerText="Texto">
									<h:outputText value="#{noticias.texto}" />
						</p:column>
						<p:column headerText="Fecha Publicación">
							<h:outputText value="#{noticias.fecha_Publicacion}" />			
						</p:column>
						

					</p:dataTable>

				</h:form>


				

				<!-- Lista PROYECTOS  -->
				<h:form rendered="#{controlAlumno.showtableProyectos}">
					<p:dataTable class="tabla" id="proyecto"
						value="#{controlAlumno.listaProyectos}" var="proyectos" rowKey="#{proyectos.ID_Proyecto}"
						selection="#{controlAlumno.selectedProyecto}" selectionMode="single">

						<p:column headerText="Id">
								<h:outputText value="#{proyectos.ID_Proyecto}" />
						</p:column>
						<p:column headerText="ONG">
								<h:outputText value="#{proyectos.ong}" />
						</p:column>
						<p:column headerText="Lugar">
								<h:outputText value="#{proyectos.lugar}" />
						</p:column>
						<p:column headerText="Fecha Inicio">
								<h:outputText value="#{proyectos.fecha_Inicio}" />
						</p:column>
						<p:column headerText="Fecha Final">
								<h:outputText value="#{proyectos.fecha_Final}" />
						</p:column>
						<p:column headerText="Estado">
								<h:outputText value="#{proyectos.estado}" />
						</p:column>
						

					</p:dataTable>

					<p:contextMenu>
						<p:menuitem value="Enviar solicitud" action="#{controlAlumno.crearSolicitud}" 
						onclick="PF('dlg1').show()"/>
					</p:contextMenu>
					<p:dialog header="Solicitud" widgetVar="dlg1" minHeight="40">
    						<h:outputText value="Solicitud enviada!" />
					</p:dialog>
				</h:form>

				<h:form rendered="#{controlAlumno.showtablePerfil}">
					<p:dataTable class="tabla" id="perfil"
						value="#{controlAlumno.miAlumno}" var="perfil" editable="true">

						<p:column headerText="Usuario">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{perfil.usuario}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{perfil.usuario}" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Contraseña">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{perfil.contrasena}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{perfil.contrasena}" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						<p:column headerText="Correo">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{perfil.correo}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{perfil.correo}" />
								</f:facet> 
							</p:cellEditor>
						</p:column>
						<p:column headerText="Universidad">
							<h:outputText value="#{perfil.universidad}" />
						</p:column>
						
						<p:column headerText="Dirección">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{perfil.direccion}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{perfil.direccion}" />
								</f:facet> 
							</p:cellEditor>
						</p:column>
						<p:column headerText="Idiomas">
							<p:cellEditor>
								<f:facet name="output">
									<p:dataList value="#{perfil.idiomas}" var="idioma" type="ordered">
								        #{idioma.name}
								    </p:dataList>
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{perfil.idiomas}" />
								</f:facet> 
							</p:cellEditor>
						</p:column>
						<p:column style="width:35px">
							<p:rowEditor /> 
						</p:column>
						
					</p:dataTable>

				</h:form>

			</c:when>
			<c:otherwise>
				<ui:include src="/WEB-INF/Templates/errorAutorizacion.xhtml" />
			</c:otherwise>
		</c:choose>
		
		
		
		<div class="ui-g">
		    <div class="ui-g-12 ui-md-10 ui-g-nopad">
		        <div class="ui-g-12 ui-g-nopad">
		            <div class="ui-g">
		                <div class="ui-g-3"> 
		                
		                	<h:form id="form">
		                	    <p:dataList value="#{controlAlumno.listaSolicitudes}" var="solicitudes" type="definition">
							    	<f:facet name="header">
							            Solicitudes
							        </f:facet>
							    	<h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">
							            <p:outputPanel>
							                <h:panelGrid columns="2" cellpadding="5">
							                    <h:outputText value="Id:" />
							                    <h:outputText value="#{solicitudes.id_Solicitud}" style="font-weight: bold"/>
							 
							                    <h:outputText value="Estado:" />
							                    <h:outputText value="#{solicitudes.estado}" style="font-weight: bold"/>
							 
							                    <h:outputText value="Universidad:" />
							                    <h:outputText value="#{solicitudes.universidad}" style="font-weight: bold"/>
							 
							                    <h:outputText value="Proyecto:" />
							                    <h:outputText value="#{solicitudes.proyecto.ID_Proyecto}" style="font-weight: bold"/>						 
							                </h:panelGrid>
							            </p:outputPanel>
							        </h:panelGrid>
							        <hr />
							    </p:dataList>
							</h:form>
		                
		                
		                
		                
		                
		                
		                </div>
		                <div class="ui-g-8"> 
		                
		                	<c:choose>
								<c:when test="#{controlAutorizacion.usuario.rol == 'ALUMNO'}">
									<h:form>
										<p:accordionPanel>
											<p:tab title="Vista Proyectos">
		            							<h:form>
													<p:dataTable class="tabla" id="proyecto"
														value="#{controlAlumno.listaProyectos}" var="proyectos" rowKey="#{proyectos.ID_Proyecto}"
														selection="#{controlAlumno.selectedProyecto}" selectionMode="single">
								
														<p:column headerText="Id">
																<h:outputText value="#{proyectos.ID_Proyecto}" />
														</p:column>
														<p:column headerText="ONG">
																<h:outputText value="#{proyectos.ong}" />
														</p:column>
														<p:column headerText="Lugar">
																<h:outputText value="#{proyectos.lugar}" />
														</p:column>
														<p:column headerText="Fecha Inicio">
																<h:outputText value="#{proyectos.fecha_Inicio}" />
														</p:column>
														<p:column headerText="Fecha Final">
																<h:outputText value="#{proyectos.fecha_Final}" />
														</p:column>
														<p:column headerText="Estado">
																<h:outputText value="#{proyectos.estado}" />
														</p:column>
														
								
													</p:dataTable>
								
													<p:contextMenu>
														<p:menuitem value="Enviar solicitud" action="#{controlAlumno.crearSolicitud}" 
														onclick="PF('dlg1').show()"/>
													</p:contextMenu>
													<p:dialog header="Solicitud" widgetVar="dlg1" minHeight="40">
								    						<h:outputText value="Solicitud enviada!" />
													</p:dialog>
												</h:form>
										            							
		            						</p:tab>
		            						
		            						<p:tab title="Editar Perfil">
		            							
		            						</p:tab> 
		            					</p:accordionPanel>   
		                			</h:form>
		                		</c:when>
		                	</c:choose>
		                </div>
		                <div class="ui-g-3">
		                
		                	<h:form id="form2">
							    <p:dataList value="#{controlAlumno.listaNoticias}" var="noticias" type="definition">
							    	<f:facet name="header">
							            Noticias
							        </f:facet>
							        <h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">
							            <p:outputPanel>
							                <h:panelGrid columns="2" cellpadding="5">
							                    <h:outputText value="Id:" />
							                    <h:outputText value="#{noticias.id_Noticia}" style="font-weight: bold"/>
							 
							                    <h:outputText value="Autor:" />
							                    <h:outputText value="#{noticias.autor}" style="font-weight: bold"/>
							 
							                    <h:outputText value="ONG:" />
							                    <h:outputText value="#{noticias.ong}" style="font-weight: bold"/>
							 
							                    <h:outputText value="Título" />
							                    <h:outputText value="#{noticias.titulo}" style="font-weight: bold"/>						 
							 
							 					<h:outputText value="Texto:" />
							                    <h:outputText value="#{noticias.texto}" style="font-weight: bold"/>
							 
							                    <h:outputText value="Fecha Publicación:" />
							                    <h:outputText value="#{noticias.fecha_Publicacion}" style="font-weight: bold"/>						 
							 
							                </h:panelGrid>
							            </p:outputPanel>
							        </h:panelGrid>
							        <hr />
							    </p:dataList>
							</h:form>
		                            	
		                	
		                	
		                	
		                </div>
		            </div>
		        </div>
		    </div>
		    <div class="ui-g-12">
		        Footer
		    </div>
		</div>
		
		
		
		
	</ui:define>
</ui:composition>